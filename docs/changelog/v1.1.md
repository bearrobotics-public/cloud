# v1.1
## Release: Bear Cloud API v1.1
September 28, 2025
<div class="tag-container">
  <div class="tag">Release</div>
  <div class="tag feature">Prod</div>
  <div class="tag feature">servi-25.02</div>
  <div class="tag feature">carti-25.02</div>
</div>

!!!note
    Bear Cloud API v1.1 is designed to be **backward compatible** with v1.0, so there should not be any issues working with the v1.0 gRPC APIs.

### Minimum Robot Software Versions (for full support)
1. Servi: 25.02 (planned to be released by Q4 2025)
2. Carti: 25.02 (planned to be released by Q4 2025)

### Key features

- **14 new RPCs** spanning maps, locations, system control, error handling, and robot-specific extensions
- **Enhanced robot family support** with dedicated Carti conveyor operations and expanded Servi tray management
- **Improved observability** through network status monitoring and error code subscriptions, along with richer robot status data
- **Better fleet management** with location discovery and enhanced robot status querying

### New RPCs

#### Robot Status & System
- **GetRobotStatus** - Get the latest robot connectivity and operational state
- **GetRobotSystemInfo** - Get overall robot system information (tends to be static)
- **RunSystemCommand** - Execute OS-level commands on a robot (e.g., reboot)
- **SubscribeNetworkStatus** - Subscribe to current network-related info including Wi-Fi and connectivity info

#### Fleet Management
- **GetAvailableLocations** - Return a map of locations the user has access to (location ID paired with human-readable name)

#### Maps & Locations
- **GetLocationInfo** - Retrieve information about a specific location by its 4-letter ID, including metadata such as floors, sections, and their associated maps
- **GetMap** - Retrieve a saved map by map_id from the cloud (does not require robot connectivity)
- **SwitchMap** - Switch the robot's current map to a specified map using floor level and section index (multi-map locations only)

#### Error Handling
- **SubscribeErrorCodes** - Subscribe to error codes returned by the robot

#### Localization & Navigation
- **SetPose** - Update the robot's pose on the map without attempting to verify alignment with lidar scans (unlike LocalizeRobot)

#### Servi-Specific RPCs
- **CalibrateTrays** - Calibrate the trays on tray-equipped robots (Servi, Servi Plus). Calibrates all trays if no specific tray names are provided

#### Carti-Specific RPCs - Conveyors
- **ControlConveyor** - Control conveyor motor operations for clockwise/counter-clockwise rotation or stop commands
- **GetConveyorIndex** - Retrieve the configured conveyor indexes for the robot
- **SubscribeConveyorStatus** - Subscribe to conveyor status updates including operation state, payload detection, health status, and installation status

### Modified Message Fields

#### RobotState (bearrobotics/api/v1/core/robot_status.proto)
- **Added:** `battery` field (field 2) - Battery state information
- **Added:** `emergency_stop` field (field 3) - Emergency stop system state
- **Added:** `mission` field (field 4) - Current mission state
- **Added:** `pose` field (field 5) - Robot's current pose
- **Added:** `error_codes` field (field 6) - Error codes from the robot
- **Added:** `typed_status` oneof (fields 7-8) - Robot family-specific states (ServiState, CartiState)
- **New:** `ServiState` message - Servi-specific robot states including tray information
- **New:** `CartiState` message - Carti-specific robot states including conveyor information

#### MissionState (bearrobotics/api/v1/core/mission_status.proto)
- **Added:** `mission_type` field (field 6) - Indicates the type of mission being executed
- **Added:** `owner` field (field 7) - Identifies who initiated the mission (e.g., "touchscreen", "api")
- **New:** `MissionType` message - Categorizes mission types by source (base, servi, carti)
- **New:** `MissionStates` message - Collection of missions with tracking of current active mission

!!!note
    The previous `mission_state` field (field 3) will still be supported, but the use of the `mission_states` will provide a better view of the list of active and pending missions.

#### EmergencyStopState (bearrobotics/api/v1/core/robot_status.proto)
- **Added:** `button_pressed` field (field 2) - Physical emergency stop button state

#### Mission Definitions (bearrobotics/api/v1/core/mission.proto)
- **Added:** `BaseType` enum - Defines mission types for core API
- **Enhanced:** `NavigateAutoMission` - Improved documentation for goal selection behavior

### New Dependencies

v1.1 introduces several new proto dependencies to support the expanded functionality:

- `bearrobotics/api/v1/carti/conveyor.proto` - Conveyor control and status definitions
- `bearrobotics/api/v1/core/errors.proto` - Error code definitions
- `bearrobotics/api/v1/core/location.proto` - Location information structures
- `bearrobotics/api/v1/core/network_status.proto` - Network status definitions
- `bearrobotics/api/v1/core/robot_system.proto` - Robot system information structures


### New API Customers
Please contact your Account Manager to discuss API use cases and request API keys.

#### How to Upgrade
1. Review the v1.1 [API endpoint specification](../v1.1/resources/Mission.md).
2. Upgrade robot software to the compatible versions listed above.
3. Download and compile the updated v1 Protobuf library. See our Programming Guide and examples for relevant endpoints.
4. Test your integration against the new version.

